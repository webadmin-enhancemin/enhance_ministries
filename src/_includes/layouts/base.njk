<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">

    {# Page-specific SEO meta tags #}
    <meta name="description" content="{{ description or site.tagline }}">
    <meta name="keywords" content="{{ keywords or 'pastoral coaching, ministry support, pastor care, church consulting, nonprofit ministry' }}">
    <meta name="author" content="{{ site.name }}">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="{{ site.url }}{{ canonical or page.url }}">

    {# Open Graph / Facebook #}
    <meta property="og:type" content="{{ ogType or 'website' }}">
    <meta property="og:url" content="{{ site.url }}{{ page.url }}">
    <meta property="og:title" content="{{ title }} | {{ site.name }}">
    <meta property="og:description" content="{{ description or site.tagline }}">
    <meta property="og:image" content="{{ site.url }}/assets/{{ ogImage or 'logo.png' }}">
    <meta property="og:site_name" content="{{ site.name }}">

    {# Twitter #}
    <meta name="twitter:card" content="{{ twitterCard or 'summary_large_image' }}">
    <meta name="twitter:url" content="{{ site.url }}{{ page.url }}">
    <meta name="twitter:title" content="{{ title }} | {{ site.name }}">
    <meta name="twitter:description" content="{{ description or site.tagline }}">
    <meta name="twitter:image" content="{{ site.url }}/assets/{{ ogImage or 'logo.png' }}">

    <title>{{ title }}{% if title %} | {% endif %}{{ site.name }}</title>
    <link rel="icon" type="image/png" href="/assets/favicon.png">

    {# Page-specific structured data #}
    {% block structuredData %}{% endblock %}

    <link rel="stylesheet" href="/styles.css?v={{ site.cssVersion }}">

    {# Preload critical resources #}
    {% if preloadHero %}
    <link rel="preload" as="image" href="/assets/hero-mountain.webp" fetchpriority="high" type="image/webp">
    {% endif %}
    {% block preload %}{% endblock %}

    {# Google Fonts #}
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    {# Additional head content #}
    {% block head %}{% endblock %}
</head>
<body>
    {# Navigation - navStyle can be 'solid' or omitted for transparent #}
    {% include "components/nav.njk" %}

    <main>
        {{ content | safe }}
    </main>

    {# Footer #}
    {% include "components/footer.njk" %}

    {# Donate Modal #}
    {% include "components/donate-modal.njk" %}

    {# JavaScript #}
    <script>
        {# Mobile Navigation Toggle #}
        {% include "components/scripts/nav-toggle.njk" %}

        {# Donate Modal Logic #}
        {% include "components/scripts/modal.njk" %}

        {# Dropdown Toggle (if needed) #}
        {% if hasDropdown %}
        {% include "components/scripts/dropdown.njk" %}
        {% endif %}

        {# Smooth Scroll for anchor links #}
        {% if hasSmoothScroll %}
        {% include "components/scripts/smooth-scroll.njk" %}
        {% endif %}

        {# Navbar background on scroll (transparent nav only) #}
        {% if hasNavScroll %}
        {% include "components/scripts/nav-scroll.njk" %}
        {% endif %}

        {# Carousel Navigation (team/testimonials/services) #}
        {% if hasCarousel or hasServicesCarousel %}
        {% include "components/scripts/carousel.njk" %}
        {% endif %}

        {# Contact Form #}
        {% if hasContactForm %}
        {% include "components/scripts/contact-form.njk" %}
        {% endif %}

        {# Page-specific scripts #}
        {% block scripts %}{% endblock %}
    </script>
</body>
</html>
