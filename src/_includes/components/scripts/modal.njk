{#
  Donate Modal Script

  Handles:
  - Open modal from nav donate button
  - Open modal from mobile donate button
  - Open modal from CTA buttons (if #open-donate-modal exists)
  - Close modal via X button
  - Close modal via clicking outside
#}

// Donate modal
const donateModal = document.getElementById('donate-modal');
const openDonateBtn = document.getElementById('open-donate-modal');
const navDonateBtn = document.querySelector('.nav-donate-btn');
const mobileDonateBtn = document.getElementById('mobile-donate-btn');
const closeModalBtn = document.querySelector('.modal-close');

const openModal = () => {
    donateModal.classList.add('active');
    document.body.style.overflow = 'hidden';
    // Close mobile nav if open
    if (navMenu) {
        navMenu.classList.remove('active');
    }
    if (navToggle) {
        navToggle.classList.remove('active');
    }
};

// Attach open handlers
if (openDonateBtn) openDonateBtn.addEventListener('click', openModal);
if (navDonateBtn) navDonateBtn.addEventListener('click', openModal);
if (mobileDonateBtn) mobileDonateBtn.addEventListener('click', openModal);

// Close via X button
if (closeModalBtn) {
    closeModalBtn.addEventListener('click', () => {
        donateModal.classList.remove('active');
        document.body.style.overflow = '';
    });
}

// Close via clicking outside modal
donateModal.addEventListener('click', (e) => {
    if (e.target === donateModal) {
        donateModal.classList.remove('active');
        document.body.style.overflow = '';
    }
});
