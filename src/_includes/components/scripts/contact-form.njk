{# Contact form submission - opens email client with form data #}
const interestSelect = document.getElementById('interest');
const messageGroup = document.getElementById('message-group');
const messageTextarea = document.getElementById('message');

if (interestSelect) {
    interestSelect.addEventListener('change', function() {
        if (this.value === 'Other (specify below)') {
            messageGroup.style.display = 'block';
            messageTextarea.required = true;
        } else {
            messageGroup.style.display = 'none';
            messageTextarea.required = false;
            messageTextarea.value = '';
        }
    });
}

const contactForm = document.getElementById('contact-form');
const formStatus = document.getElementById('form-status');

if (contactForm) {
    contactForm.addEventListener('submit', function(e) {
        e.preventDefault();

        const name = document.getElementById('name').value;
        const interest = document.getElementById('interest').value;
        const message = document.getElementById('message').value;

        const subject = encodeURIComponent(`Contact from ${name} - ${interest}`);
        let mailtoUrl = `mailto:info@enhancemin.com?subject=${subject}`;

        if (message.trim()) {
            const body = encodeURIComponent(`Message from ${name}:\n\n${message}`);
            mailtoUrl += `&body=${body}`;
        }

        window.location.href = mailtoUrl;

        formStatus.className = 'form-status success';
        formStatus.textContent = 'Opening your email client... If it doesn\'t open, please email info@enhancemin.com directly.';
    });
}
